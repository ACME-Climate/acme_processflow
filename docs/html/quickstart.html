

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quick Start &mdash; acme_processflow 0.4.52-devel-rc3 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="acme_processflow 0.4.52-devel-rc3 documentation" href="index.html"/>
        <link rel="next" title="Globus Transfer" href="transfer.html"/>
        <link rel="prev" title="Installation" href="installation.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> acme_processflow
          

          
          </a>

          
            
            
              <div class="version">
                0.4.52
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#anaconda">Anaconda</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-configuration">Run Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#execution">Execution</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="transfer.html">Globus Transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="amwg.html">AMWG Diagnostic</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncclimo.html">Ncclimo Diagnostic</a></li>
<li class="toctree-l1"><a class="reference internal" href="aprime.html">A-Prime Diagnostic</a></li>
<li class="toctree-l1"><a class="reference internal" href="acme_diags.html">ACME Diagnostic</a></li>
<li class="toctree-l1"><a class="reference internal" href="sample.html">Sample</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">acme_processflow</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Quick Start</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/quickstart.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quick-start">
<span id="quickstart"></span><h1>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h1>
<p>This is a guide for a new user on a system thats already been properly setup. For new users starting from scratch please referece to the
<a class="reference internal" href="installation.html#installation"><span class="std std-ref">Installation</span></a> guide.</p>
<div class="section" id="anaconda">
<h2>Anaconda<a class="headerlink" href="#anaconda" title="Permalink to this headline">¶</a></h2>
<p>You will need to first create an anaconda environment with the depedencies and install the processflow. Once conda has install all the python modules, create a run configuration file from the
default and edit it to suit your case. You can find a <a class="reference internal" href="sample.html#sample"><span class="std std-ref">Sample</span></a> configuration here.</p>
</div>
<div class="section" id="run-configuration">
<h2>Run Configuration<a class="headerlink" href="#run-configuration" title="Permalink to this headline">¶</a></h2>
<p>The acme_processflow config file contains all settings required to setup a run. Although the config file has many options, most of them
are only useful in non-default environments or to advanced users. For a basic run, the only keys that need to be changed are:</p>
<p><strong>project_path</strong>
The root path to be created on the local machine for all local storage. All model data used as input will be saved in project_path/input, and all job output will be stored in project_path/output</p>
<p><strong>source_path</strong>
This is the path to look for data on the remote machine. This should be the root directory for the simulation, below which will be /run and /archive directories.</p>
<p><strong>simulation_start_year</strong>
The start year of the simulation. For example if the first year of the simulation output is 0100, put 100. If the first year is 0001, out 1. Note that since E3SM numbers its years as a 1 indexed array, the first year should be 1, not 0.</p>
<p><strong>simulation_end_year</strong>
The expected end year. This can be set to any year while the simulation is still starting, and the acme_processflow will continuously poll for new data and start jobs as the data is made available.</p>
<p><strong>exeriment</strong>
The name of the experiment, based on the ACME convention for naming the file output. For example: 20170313.beta1_02.A_WCYCL1850S.ne30_oECv3_ICG.edison</p>
<p><strong>set_frequency</strong>
The acme_processflow breaks the simulation into groups based on how much data you want the jobs to run on.
For example if you wanted AMWG to run on every 10 years, but also on every 50 years, you could have set_frequency = 10, 50,
and for every group of 10 years and 50 years you would get the jobs for that length run.
In this example, with 50 years of output, you would get sets from 1-10, 11-20, 21-30, 31-40, 41-50, and 1-50.</p>
<p><strong>set_jobs</strong>
Which jobs to run on which sets. This allows you to have different subsets of jobs run on different set lengths.
If you dont want a job to run at all simply remove it from the list.</p>
<p>An example:</p>
<dl class="docutils">
<dt>[[set_jobs]]</dt>
<dd># this will run ncclimo for both 5 and 10
ncclimo = 5, 10
# this will run time series only at 10
timeseries = 10
# this will run amwg only at 5
amwg = 5
# this will turn off the aprime diags by commenting it out
# aprime_diags = 5
e3sm_diags = 10</dd>
</dl>
</div>
<div class="section" id="execution">
<h2>Execution<a class="headerlink" href="#execution" title="Permalink to this headline">¶</a></h2>
<p>The acme_processflow has two run modes, interactive and headless. In headless mode the current run status is written out to a file named run_state.txt under the output directory.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>usage: processflow.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-c CONFIG<span class="o">]</span> <span class="o">[</span>-u<span class="o">]</span> <span class="o">[</span>-l LOG<span class="o">]</span> <span class="o">[</span>-n<span class="o">]</span> <span class="o">[</span>-m<span class="o">]</span> <span class="o">[</span>-f<span class="o">]</span>
                  <span class="o">[</span>-r RESOURCE_DIR<span class="o">]</span>

optional arguments:
-h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
-c CONFIG, --config CONFIG
                        Path to configuration file.
-u, --ui              Turn on the GUI.
-l LOG, --log LOG     Path to logging output file.
-n, --no-cleanup      Don<span class="s1">&#39;t perform post run cleanup. This will leave all</span>
<span class="s1">                        files in place.</span>
<span class="s1">-m, --no-monitor      Don&#39;</span>t run the remote monitor or move any files over
                        globus.
-f, --file-list       Turn on debug output of the internal file_list so you
                        can see what the current state of the model files are
-r RESOURCE_DIR, --resource-dir RESOURCE_DIR
                        Path to custom resource directory
</pre></div>
</div>
<p>Once you’ve configured your run, execute this command to start in interactive mode.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>processflow.py -c run.cfg
</pre></div>
</div>
<p>When run in interactive mode, the acme_processflow will exit if the terminal window is closed. For long running jobs, the best run method is to make sure the source and destination globus nodes have been activated with your credentials, and then run</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>nohup processflow.py -c /PATH/TO/YOUR/CONFIG <span class="p">&amp;</span>
</pre></div>
</div>
<p>Once the run starts, you will be prompted to authenticate with globus. Simply copy the address and paste into your browser.
You will be presented with a page to choose which OAuth provided to use, its recommended that you use the default globus ID provider.</p>
<p>Once you have entered your credentials and logged in, you will be given a randomly generated key, copy that key and paste it into the terminal prompt</p>
<p>Once you have logged into globus, each data node will need to be activated with your account. This activation can last for days, but periodically needs to be re-run.
If the node needs to be activated you will be prompted, if your credentials are still cached on the node this step will be skipped.</p>
<p>Once a run starts in interactive mode, you should see the job sets listed, and the jobs should populate. When all the jobs finish, you will be emailed with links to the diagnostic output.</p>
<p>Credentials to view the output can be found here: <a class="reference external" href="https://acme-climate.atlassian.net/wiki/spaces/ATM/pages/41353486/How+to+run+AMWG+diagnostics+package?preview=%2F41353486%2F42730119%2Fcredentials.png">https://acme-climate.atlassian.net/wiki/spaces/ATM/pages/41353486/How+to+run+AMWG+diagnostics+package?preview=%2F41353486%2F42730119%2Fcredentials.png</a></p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="transfer.html" class="btn btn-neutral float-right" title="Globus Transfer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Sterling Baldwin.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.4.52-devel-rc3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>