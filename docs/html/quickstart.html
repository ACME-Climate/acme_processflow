

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quick Start &mdash; processflow 2.0.4-0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Run Configuration" href="configuration.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> processflow
          

          
          </a>

          
            
            
              <div class="version">
                2.0.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#processflow-install">Processflow install</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#execution">Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#machine-specific-configuration">Machine Specific Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lcrc-blues-anvil">LCRC (Blues/Anvil)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#llnl-acme1-aims4">LLNL (acme1/aims4)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nersc-edison">NERSC (edison)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Run Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="sample.html">Sample</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">processflow</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Quick Start</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/quickstart.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quick-start">
<span id="quickstart"></span><h1>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h1>
<p>This is a guide for a new user on a system thats already been properly setup. For new users starting from scratch please referece to the
<a class="reference internal" href="installation.html#installation"><span class="std std-ref">Installation</span></a> guide.</p>
<div class="section" id="processflow-install">
<h2>Processflow install<a class="headerlink" href="#processflow-install" title="Permalink to this headline">¶</a></h2>
<p>You will need to first create an anaconda environment with the depedencies and install the processflow. Once conda has install all the python modules, create a run configuration file from the
default and edit it to suit your case. You can find a <a class="reference internal" href="sample.html#sample"><span class="std std-ref">Sample</span></a> configuration here.</p>
<p>This install command will create a new anaconda environment with the latest stable release.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">processflow</span> <span class="o">-</span><span class="n">c</span> <span class="n">e3sm</span> <span class="o">-</span><span class="n">c</span> <span class="n">cdat</span><span class="o">/</span><span class="n">label</span><span class="o">/</span><span class="n">nightly</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="o">-</span><span class="n">c</span> <span class="n">cdat</span> <span class="n">processflow</span>
<span class="n">conda</span> <span class="n">activate</span> <span class="n">processflow</span>
</pre></div>
</div>
<p>Use the following command to get the latest nightly build.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">processflow_nightly</span> <span class="o">-</span><span class="n">c</span> <span class="n">e3sm</span><span class="o">/</span><span class="n">label</span><span class="o">/</span><span class="n">nightly</span> <span class="o">-</span><span class="n">c</span> <span class="n">e3sm</span> <span class="o">-</span><span class="n">c</span> <span class="n">cdat</span><span class="o">/</span><span class="n">label</span><span class="o">/</span><span class="n">nightly</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="o">-</span><span class="n">c</span> <span class="n">cdat</span> <span class="n">processflow</span>
<span class="n">conda</span> <span class="n">activate</span> <span class="n">processflow_nightly</span>
</pre></div>
</div>
<p>Once you have the processflow installed, the next step is creating your run configuration file. See <a class="reference internal" href="configuration.html#configuration"><span class="std std-ref">Run Configuration</span></a> on how to setup your run config. You can find a <a class="reference internal" href="sample.html#sample"><span class="std std-ref">Sample</span></a> configuration here.</p>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference external" href="https://github.com/E3SM-Project/processflow/tree/master/samples">here for real life configuration examples</a></p>
<p>Get a copy of the example config, and edit its keys to fit your case. You can get a copy of the example here:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">E3SM</span><span class="o">-</span><span class="n">Project</span><span class="o">/</span><span class="n">processflow</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">run</span><span class="o">.</span><span class="n">cfg</span>
</pre></div>
</div>
<p>For a complete explanation of each config key, see the <a class="reference internal" href="configuration.html#configuration"><span class="std std-ref">Run Configuration</span></a> guide.</p>
</div>
<div class="section" id="execution">
<h2>Execution<a class="headerlink" href="#execution" title="Permalink to this headline">¶</a></h2>
<p>Running the processflow is extremely simple. Once your config is setup, simply execute the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">processflow</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">c</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">your</span><span class="o">/</span><span class="n">run</span><span class="o">.</span><span class="n">cfg</span>
</pre></div>
</div>
<p>Once the run starts, you may be prompted to authenticate with globus (if using globus to transfer files), or your ssh credentials (is using sftp to transfer files).</p>
<p>Once you have logged into globus, each data node will need to be activated with your account.
This activation can last from days to weeks depending on the nodes configuration, but periodically needs to be re-run.
If a node needs to be activated the processflow will notify you and wait.</p>
<p>Once diagnostic output has been created, it will be moved to the host location (if img hosting is turned on). The web directories on NERSC and LLNL machines are password protected, credentials to view the output can be found here: <a class="reference external" href="https://acme-climate.atlassian.net/wiki/spaces/ATM/pages/41353486/How+to+run+AMWG+diagnostics+package?preview=%2F41353486%2F42730119%2Fcredentials.png">https://acme-climate.atlassian.net/wiki/spaces/ATM/pages/41353486/How+to+run+AMWG+diagnostics+package?preview=%2F41353486%2F42730119%2Fcredentials.png</a></p>
</div>
<div class="section" id="machine-specific-configuration">
<span id="machine-specific-config"></span><h2>Machine Specific Configuration<a class="headerlink" href="#machine-specific-configuration" title="Permalink to this headline">¶</a></h2>
<p>Each of the E3SM supported machines has a slightly different setup for where they store input files and host output.</p>
</div>
<div class="section" id="lcrc-blues-anvil">
<h2>LCRC (Blues/Anvil)<a class="headerlink" href="#lcrc-blues-anvil" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="k">global</span><span class="p">]</span>
    <span class="n">project_path</span> <span class="o">=</span> <span class="o">/</span><span class="n">lcrc</span><span class="o">/</span><span class="n">group</span><span class="o">/</span><span class="n">acme</span><span class="o">/&lt;</span><span class="n">YOUR_USERNAME</span><span class="o">&gt;/&lt;</span><span class="n">YOUR_PROJECT</span><span class="o">&gt;</span>

<span class="p">[</span><span class="n">img_hosting</span><span class="p">]</span>
    <span class="n">img_host_server</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">lcrc</span><span class="o">.</span><span class="n">anl</span><span class="o">.</span><span class="n">gov</span>
    <span class="n">host_directory</span> <span class="o">=</span> <span class="o">/</span><span class="n">lcrc</span><span class="o">/</span><span class="n">group</span><span class="o">/</span><span class="n">acme</span><span class="o">/</span><span class="n">public_html</span><span class="o">/</span><span class="n">diagnostic_output</span><span class="o">/&lt;</span><span class="n">YOUR_USERNAME</span><span class="o">&gt;</span>
    <span class="n">url_prefix</span> <span class="o">=</span> <span class="o">/</span><span class="n">public</span><span class="o">/</span><span class="n">e3sm</span><span class="o">/</span><span class="n">diagnostic_output</span><span class="o">/&lt;</span><span class="n">YOUR_USERNAME</span><span class="o">&gt;</span>

<span class="p">[</span><span class="n">post</span><span class="o">-</span><span class="n">processing</span><span class="p">]</span>
    <span class="p">[[</span><span class="n">climo</span><span class="p">]]</span>
        <span class="n">regrid_map_path</span> <span class="o">=</span> <span class="o">~</span><span class="n">zender</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">maps</span><span class="o">/&lt;</span><span class="n">YOUR_REGRID_MAP</span><span class="o">&gt;</span>

<span class="p">[</span><span class="n">diags</span><span class="p">]</span>
    <span class="p">[[</span><span class="n">e3sm_diags</span><span class="p">]]</span>
        <span class="n">reference_data_path</span> <span class="o">=</span> <span class="o">/</span><span class="n">lcrc</span><span class="o">/</span><span class="n">group</span><span class="o">/</span><span class="n">acme</span><span class="o">/</span><span class="n">diagnostics</span><span class="o">/</span><span class="n">obs_for_acme_diags</span>

    <span class="p">[[</span><span class="n">amwg</span><span class="p">]]</span>
        <span class="n">diag_home</span> <span class="o">=</span> <span class="o">/</span><span class="n">lcrc</span><span class="o">/</span><span class="n">group</span><span class="o">/</span><span class="n">acme</span><span class="o">/</span><span class="n">amwg</span><span class="o">/</span><span class="n">amwg_diag</span>

    <span class="p">[[</span><span class="n">aprime</span><span class="p">]]</span>
        <span class="n">aprime_code_path</span> <span class="o">=</span> <span class="o">/</span><span class="n">lcrc</span><span class="o">/</span><span class="n">group</span><span class="o">/</span><span class="n">acme</span><span class="o">/</span><span class="n">diagnostics</span><span class="o">/</span><span class="n">a</span><span class="o">-</span><span class="n">prime</span><span class="o">/</span><span class="n">code</span>
</pre></div>
</div>
</div>
<div class="section" id="llnl-acme1-aims4">
<h2>LLNL (acme1/aims4)<a class="headerlink" href="#llnl-acme1-aims4" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="k">global</span><span class="p">]</span>
    <span class="n">project_path</span> <span class="o">=</span> <span class="o">/</span><span class="n">p</span><span class="o">/</span><span class="n">user_pub</span><span class="o">/</span><span class="n">e3sm</span><span class="o">/&lt;</span><span class="n">YOUR_USERNAME</span><span class="o">&gt;/&lt;</span><span class="n">YOUR_PROJECT</span><span class="o">&gt;</span>

<span class="p">[</span><span class="n">img_hosting</span><span class="p">]</span>
    <span class="n">img_host_server</span> <span class="o">=</span> <span class="n">Either</span> <span class="n">acme</span><span class="o">-</span><span class="n">viewer</span><span class="o">.</span><span class="n">llnl</span><span class="o">.</span><span class="n">gov</span> <span class="ow">or</span> <span class="n">aims4</span><span class="o">.</span><span class="n">llnl</span><span class="o">.</span><span class="n">gov</span>
    <span class="n">host_directory</span> <span class="o">=</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">acme</span><span class="o">/</span><span class="n">acme</span><span class="o">-</span><span class="n">diags</span><span class="o">/&lt;</span><span class="n">YOUR_USERNAME</span><span class="o">&gt;/</span>
    <span class="n">url_prefix</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">YOUR_USERNAME</span><span class="o">&gt;</span>

<span class="p">[</span><span class="n">post</span><span class="o">-</span><span class="n">processing</span><span class="p">]</span>
    <span class="p">[[</span><span class="n">climo</span><span class="p">]]</span>
        <span class="n">regrid_map_path</span> <span class="o">=</span> <span class="o">/</span><span class="n">space2</span><span class="o">/</span><span class="n">zender1</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">maps</span><span class="o">/&lt;</span><span class="n">YOUR_REGRID_MAP</span><span class="o">&gt;</span>

<span class="p">[</span><span class="n">diags</span><span class="p">]</span>
    <span class="p">[[</span><span class="n">e3sm_diags</span><span class="p">]]</span>
        <span class="n">reference_data_path</span> <span class="o">=</span> <span class="o">/</span><span class="n">p</span><span class="o">/</span><span class="n">cscratch</span><span class="o">/</span><span class="n">acme</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">obs_for_acme_diags</span>

    <span class="p">[[</span><span class="n">amwg</span><span class="p">]]</span>
        <span class="n">diag_home</span> <span class="o">=</span> <span class="o">/</span><span class="n">p</span><span class="o">/</span><span class="n">cscratch</span><span class="o">/</span><span class="n">acme</span><span class="o">/</span><span class="n">amwg</span><span class="o">/</span><span class="n">amwg_diag</span>

    <span class="p">[[</span><span class="n">aprime</span><span class="p">]]</span>
        <span class="n">aprime_code_path</span> <span class="o">=</span> <span class="o">/</span><span class="n">p</span><span class="o">/</span><span class="n">cscratch</span><span class="o">/</span><span class="n">acme</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">a</span><span class="o">-</span><span class="n">prime</span>
</pre></div>
</div>
</div>
<div class="section" id="nersc-edison">
<h2>NERSC (edison)<a class="headerlink" href="#nersc-edison" title="Permalink to this headline">¶</a></h2>
<p>NOTE: All jobs here need to be submitted to the “regular” partition, using the “acme” account.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="k">global</span><span class="p">]</span>
    <span class="n">project_path</span> <span class="o">=</span> <span class="o">/</span><span class="k">global</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">projectdirs</span><span class="o">/</span><span class="n">acme</span><span class="o">/&lt;</span><span class="n">YOUR_USERNAME</span><span class="o">&gt;/&lt;</span><span class="n">YOUR_PROJECT</span><span class="o">&gt;</span>

<span class="p">[</span><span class="n">img_hosting</span><span class="p">]</span>
    <span class="n">img_host_server</span> <span class="o">=</span> <span class="n">portal</span><span class="o">.</span><span class="n">nersc</span><span class="o">.</span><span class="n">gov</span>
    <span class="n">host_directory</span> <span class="o">=</span> <span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">projectdirs</span><span class="o">/</span><span class="n">acme</span><span class="o">/</span><span class="n">www</span><span class="o">/&lt;</span><span class="n">YOUR_USERNAME</span><span class="o">&gt;</span>
    <span class="n">url_prefix</span> <span class="o">=</span> <span class="n">project</span><span class="o">/</span><span class="n">acme</span><span class="o">/&lt;</span><span class="n">YOUR_USERNAME</span><span class="o">&gt;</span>

<span class="p">[</span><span class="n">post</span><span class="o">-</span><span class="n">processing</span><span class="p">]</span>
    <span class="p">[[</span><span class="n">climo</span><span class="p">]]</span>
        <span class="n">regrid_map_path</span> <span class="o">=</span> <span class="o">~</span><span class="n">zender</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">maps</span><span class="o">/&lt;</span><span class="n">YOUR_REGRID_MAP</span><span class="o">&gt;</span>
        <span class="p">[[[</span><span class="n">custom_args</span><span class="p">]]]</span>
            <span class="o">--</span><span class="n">partition</span> <span class="o">=</span> <span class="n">regular</span>
            <span class="o">--</span><span class="n">account</span> <span class="o">=</span> <span class="n">acme</span>

<span class="p">[</span><span class="n">diags</span><span class="p">]</span>
    <span class="p">[[</span><span class="n">e3sm_diags</span><span class="p">]]</span>
        <span class="n">reference_data_path</span> <span class="o">=</span> <span class="o">/</span><span class="n">p</span><span class="o">/</span><span class="n">cscratch</span><span class="o">/</span><span class="n">acme</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">obs_for_acme_diags</span>
        <span class="p">[[[</span><span class="n">custom_args</span><span class="p">]]]</span>
            <span class="o">--</span><span class="n">partition</span> <span class="o">=</span> <span class="n">regular</span>
            <span class="o">--</span><span class="n">account</span> <span class="o">=</span> <span class="n">acme</span>

    <span class="p">[[</span><span class="n">amwg</span><span class="p">]]</span>
        <span class="n">diag_home</span> <span class="o">=</span> <span class="o">/</span><span class="k">global</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">projectdirs</span><span class="o">/</span><span class="n">acme</span><span class="o">/</span><span class="n">diagnostics</span><span class="o">/</span><span class="n">amwg</span>
        <span class="p">[[[</span><span class="n">custom_args</span><span class="p">]]]</span>
            <span class="o">--</span><span class="n">partition</span> <span class="o">=</span> <span class="n">regular</span>
            <span class="o">--</span><span class="n">account</span> <span class="o">=</span> <span class="n">acme</span>

    <span class="p">[[</span><span class="n">aprime</span><span class="p">]]</span>
        <span class="n">aprime_code_path</span> <span class="o">=</span> <span class="o">/</span><span class="n">p</span><span class="o">/</span><span class="n">cscratch</span><span class="o">/</span><span class="n">acme</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">a</span><span class="o">-</span><span class="n">prime</span>
        <span class="p">[[[</span><span class="n">custom_args</span><span class="p">]]]</span>
            <span class="o">--</span><span class="n">partition</span> <span class="o">=</span> <span class="n">regular</span>
            <span class="o">--</span><span class="n">account</span> <span class="o">=</span> <span class="n">acme</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="configuration.html" class="btn btn-neutral float-right" title="Run Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Sterling Baldwin

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>