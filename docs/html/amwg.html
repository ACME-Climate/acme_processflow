

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>AMWG Diagnostic &mdash; processflow 2.0.0-beta1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="processflow 2.0.0-beta1 documentation" href="index.html"/>
        <link rel="next" title="Ncclimo Diagnostic" href="ncclimo.html"/>
        <link rel="prev" title="Globus Transfer" href="transfer.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> processflow
          

          
          </a>

          
            
            
              <div class="version">
                2.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Run Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="transfer.html">Globus Transfer</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">AMWG Diagnostic</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prerequsite-jobs-and-data">Prerequsite jobs and data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sample-configuration">Sample Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ncclimo.html">Ncclimo Diagnostic</a></li>
<li class="toctree-l1"><a class="reference internal" href="aprime.html">A-Prime Diagnostic</a></li>
<li class="toctree-l1"><a class="reference internal" href="e3sm_diags.html">ACME Diagnostic</a></li>
<li class="toctree-l1"><a class="reference internal" href="sample.html">Sample</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">processflow</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>AMWG Diagnostic</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/amwg.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="amwg-diagnostic">
<h1>AMWG Diagnostic<a class="headerlink" href="#amwg-diagnostic" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference external" href="http://www.cesm.ucar.edu/working_groups/Atmosphere/amwg-diagnostics-package/">AMWG Diagsnostic</a> is the standard atmospheric diagnostic package.</p>
<div class="section" id="prerequsite-jobs-and-data">
<h2>Prerequsite jobs and data<a class="headerlink" href="#prerequsite-jobs-and-data" title="Permalink to this headline">¶</a></h2>
<p>AMWG requires the ‘atm’ data type, and the ‘climo’ job type.</p>
</div>
<div class="section" id="sample-configuration">
<h2>Sample Configuration<a class="headerlink" href="#sample-configuration" title="Permalink to this headline">¶</a></h2>
<p>These are all the config options needed to run an amwg processflow job. Note that many of the options would be identical if running
a whole set of jobs at different years, or on many cases.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[</span><span class="k">global</span><span class="p">]</span>
    <span class="n">project_path</span> <span class="o">=</span> <span class="o">/</span><span class="n">p</span><span class="o">/</span><span class="n">user_pub</span><span class="o">/</span><span class="n">e3sm</span><span class="o">/</span><span class="n">baldwin32</span><span class="o">/</span><span class="n">testing</span><span class="o">/</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">baldwin32</span><span class="nd">@llnl.gov</span>

<span class="p">[</span><span class="n">img_hosting</span><span class="p">]</span>
    <span class="n">img_host_server</span> <span class="o">=</span> <span class="n">acme</span><span class="o">-</span><span class="n">viewer</span><span class="o">.</span><span class="n">llnl</span><span class="o">.</span><span class="n">gov</span>
    <span class="n">host_directory</span> <span class="o">=</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">acme</span><span class="o">/</span><span class="n">acme</span><span class="o">-</span><span class="n">diags</span><span class="o">/</span><span class="n">baldwin32</span><span class="o">/</span>
    <span class="n">url_prefix</span> <span class="o">=</span> <span class="s1">&#39;baldwin32&#39;</span>

<span class="p">[</span><span class="n">simulations</span><span class="p">]</span>
    <span class="n">start_year</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">end_year</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="p">[[</span><span class="mf">20180129.</span><span class="n">DECKv1b_piControl</span><span class="o">.</span><span class="n">ne30_oEC</span><span class="o">.</span><span class="n">edison</span><span class="p">]]</span>
        <span class="n">transfer_type</span> <span class="o">=</span> <span class="n">globus</span>
        <span class="n">remote_uuid</span> <span class="o">=</span> <span class="mi">9</span><span class="n">d6d994a</span><span class="o">-</span><span class="mi">6</span><span class="n">d04</span><span class="o">-</span><span class="mf">11e5</span><span class="o">-</span><span class="n">ba46</span><span class="o">-</span><span class="mi">22000</span><span class="n">b92c6ec</span>
        <span class="n">remote_path</span> <span class="o">=</span> <span class="o">/</span><span class="k">global</span><span class="o">/</span><span class="n">homes</span><span class="o">/</span><span class="n">r</span><span class="o">/</span><span class="n">renata</span><span class="o">/</span><span class="n">ACME_simulations</span><span class="o">/</span><span class="mf">20180129.</span><span class="n">DECKv1b_piControl</span><span class="o">.</span><span class="n">ne30_oEC</span><span class="o">.</span><span class="n">edison</span>
        <span class="n">short_name</span> <span class="o">=</span> <span class="n">piControl</span>
        <span class="n">native_grid_name</span> <span class="o">=</span> <span class="n">ne30</span>
        <span class="n">native_mpas_grid_name</span> <span class="o">=</span> <span class="n">oEC60to30v3</span>
        <span class="n">data_types</span> <span class="o">=</span> <span class="nb">all</span>
        <span class="n">job_types</span> <span class="o">=</span> <span class="n">climo</span><span class="p">,</span> <span class="n">amwg</span>
    <span class="p">[[</span><span class="n">comparisons</span><span class="p">]]</span>
        <span class="mf">20180129.</span><span class="n">DECKv1b_piControl</span><span class="o">.</span><span class="n">ne30_oEC</span><span class="o">.</span><span class="n">edison</span> <span class="o">=</span> <span class="n">obs</span>

<span class="p">[</span><span class="n">post</span><span class="o">-</span><span class="n">processing</span><span class="p">]</span>
    <span class="p">[[</span><span class="n">climo</span><span class="p">]]</span>
        <span class="n">run_frequency</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">destination_grid_name</span> <span class="o">=</span> <span class="n">fv129x256</span>
        <span class="n">regrid_map_path</span> <span class="o">=</span> <span class="o">/</span><span class="n">p</span><span class="o">/</span><span class="n">cscratch</span><span class="o">/</span><span class="n">acme</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">map_ne30np4_to_fv129x256_aave</span><span class="o">.</span><span class="mf">20150901.</span><span class="n">nc</span>

<span class="p">[</span><span class="n">diags</span><span class="p">]</span>
    <span class="p">[[</span><span class="n">amwg</span><span class="p">]]</span>
        <span class="n">run_frequency</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">diag_home</span> <span class="o">=</span> <span class="o">/</span><span class="n">p</span><span class="o">/</span><span class="n">cscratch</span><span class="o">/</span><span class="n">acme</span><span class="o">/</span><span class="n">amwg</span><span class="o">/</span><span class="n">amwg_diag</span>

<span class="p">[</span><span class="n">data_types</span><span class="p">]</span>
    <span class="p">[[</span><span class="n">atm</span><span class="p">]]</span>
        <span class="n">remote_path</span> <span class="o">=</span> <span class="s1">&#39;REMOTE_PATH/archive/atm/hist&#39;</span>
        <span class="n">file_format</span> <span class="o">=</span> <span class="s1">&#39;CASEID.cam.h0.YEAR-MONTH.nc&#39;</span>
        <span class="n">local_path</span> <span class="o">=</span> <span class="s1">&#39;PROJECT_PATH/input/CASEID/atm&#39;</span>
        <span class="n">monthly</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<ul class="simple">
<li>[global]: These are mandatory global config options used by all jobs</li>
<li>project_path: This is the root path to where to store all project data on the local machine</li>
<li>email: The email address to send notification emails</li>
<li>[img_hosting]: This are optional config keys for hosting diagnotsic output, simply remove this section to turn off web hosting</li>
<li>img_host_server: The base url of the webserver, used for constructing the notification email links.</li>
<li>host_directory: The base directory for where to put output for web hosting, the user must have write permission here. Directories will be created for each simulation case, with jobs for the case stored below it.</li>
<li>url_prefix: Notification urls are constructed as <a class="reference external" href="https:/">https:/</a>/{img_host_server}/{url_prefix}/{case}/{diagnostic}</li>
<li>[simulations]: The config group for the simulation cases</li>
<li>[[20180129.DECKv1b_piControl.ne30_oEC.edison]]: This both is the full name of the simulation case, and creates a new config group for all options relating to this case</li>
<li>transfer_type: This can be either ‘globus’ for file transfers using globus, ‘sftp’ for using an ssh client, or ‘local’ if the data is already on the local machine</li>
<li>remote_uuid: This is the unique identifier for the remote globus node, only needed if transfer_type is set to ‘globus’</li>
<li>remote_path: The base path of the remote case, should not include /run or /archive</li>
<li>short_name: A nice short name for this case, can be any string</li>
<li>native_grid_name: The name of the native grid, can be any string</li>
<li>native_mpas_grid_name: The name of the native mpas grid for this case, can be any string</li>
<li>data_types: Which of the data types should be transfered for this case, names should match the types declared in the data_types section</li>
<li>job_types: Which job types should be run for this case. Note here how amwg requires climo.</li>
<li>[post-processing]: the config group for all post processing jobs</li>
<li>[[climo]]: The config group for generating climatologies</li>
<li>run_frequency: This can be a single integer or a list of integers. It denotes the frequencies that the amwg job should be run. For example if set to 5, 10, 50, then climatology jobs will be generated for each 5 years, 10 years, and 50 year set. For 100 years of data there would be 20 sets of 5 yeas, 10 sets of 10 years, and 2 sets of 50 years.</li>
<li>regrid_map_path: The path a the appropriate regrid map file.</li>
<li>destination_grid_name: name of the destination grid, used to create the directory the regridded output is stored in, this can be any string.</li>
<li>[diags]: The config group for all diagnostic jobs</li>
<li>[[amwg]]: The config group for amwg jobs</li>
<li>run_frequency: This can be a single integer or a list of integers. It denotes the frequencies that the amwg job should be run. For example if set to 5, 10, 50, then amwg jobs will be generated for each 5 years, 10 years, and 50 year set. For 100 years of data there would be 20 sets of 5 yeas, 10 sets of 10 years, and 2 sets of 50 years.</li>
<li>[data_types]: The config group to declare and define data types. For more detail see the data_types doc page.</li>
<li>[[atm]]: This is a special data type for atmospheric data.</li>
<li>remote_path: This is a string that will be rendered at run time for each data file, for where to find the file on the remote machine.</li>
<li>file_format: This is the format for how to render the file name.</li>
<li>local_path: This denotes where to store the file on the local machine.</li>
<li>monthly: A boolean flag (should be either True or False) for if this is monthly output or a one-off file.</li>
</ul>
</div>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>For each year set that AMWG is configured to run, it requires regridded climatologies created by ncclimo. This means any case running an amwg job
just also have a climo job for each frequency that amwg is running.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ncclimo.html" class="btn btn-neutral float-right" title="Ncclimo Diagnostic" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="transfer.html" class="btn btn-neutral" title="Globus Transfer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Sterling Baldwin.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.0.0-beta1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>